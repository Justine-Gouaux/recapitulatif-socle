# SAISON 2 - SERVER

## Contenu

- [SAISON 2 - SERVER](#saison-2---server)
  - [Contenu](#contenu)
  - [Rôle d'un serveur](#rôle-dun-serveur)
  - [Localhost](#localhost)
  - [Apache](#apache)
  - [PHP](#php)
    - [Syntaxe PHP](#syntaxe-php)
      - [Variables](#variables)
      - [Types de données](#types-de-données)
        - [Scalaires](#scalaires)
        - [Constantes](#constantes)
        - [Composées](#composées)
          - [Tableaux simples (= *array*)](#tableaux-simples--array)
          - [Tableaux associatifs](#tableaux-associatifs)
          - [Opérations](#opérations)
          - [Concaténation](#concaténation)
    - [Combinaison HTML-PHP](#combinaison-html-php)
    - [Conditions](#conditions)
    - [Boucles PHP](#boucles-php)
      - [Boucles FOR](#boucles-for)
      - [Boucles WHILE](#boucles-while)
      - [Boucles FOREACH](#boucles-foreach)
    - [Fonctions](#fonctions)
  - [Formulaires](#formulaires)
    - [Formulaires HTML](#formulaires-html)
    - [Formulaires PHP](#formulaires-php)
      - [Méthodes GET et POST](#méthodes-get-et-post)
    - [Fonctions PHP](#fonctions-php)
    - [Documentation](#documentation)


## Rôle d'un serveur

Les navigateurs web communiquent avec les serveurs web en utilisant le protocole **HTTP** (**H**yper**T**ext **T**ransfer **P**rotocol). Un serveur est donc un logiciel capable d'interpréter les requêtes HTTP arrivant sur le port associé au protocole HTTP (par défaut le port 80), et de fournir une réponse avec ce même protocole.

Une requête HTTP inclut une URL pour identifier la ressource demandée, une **méthode** (ex. *GET* et *POST*, voir plus bas) pour définir l'action désirée et peut également inclure des informations supplémentaires encodées dans les **paramètres** de l'URL (des paires clés/valeurs envoyées via une chaîne de recherche = *query string*), les données POST, ou les cookies associés.

Les serveurs web attendent des requêtes du client, les traitent quand elles arrivent, et répondent au navigateur web avec une réponse HTTP. La réponse contient un **statut** qui indique si la requête a pu être traitée avec succès ou non.

Le corps de la réponse, si la requête réussit, contient alors la ressource demandée, que le navigateur web peut alors afficher.

![](./images/web-server.svg)

## Localhost

Localhost est une machine virtuelle à partir de laquelle un serveur Web est accessible *directement depuis son ordinateur*. Il permet de développer un projet Web sur son système sans avoir à télécharger le projet sur un serveur hébergé sur Internet.

## Apache

[Apache](https://www.apache.org/) est un logiciel de serveur Web, open source et gratuit.

Autres logiciels de gestion de serveurs Web courants : **Nginx**, **Microsoft IIS**, **LiteSpeed**.

## PHP

**PHP** (acronyme récursif pour **PHP Hypertext Preprocessor**) est un langage de scripts généraliste et Open Source, spécialement conçu pour le *développement d'applications web*. Il peut être intégré facilement au HTML.

PHP est principalement conçu pour servir de langage de script coté serveur; il permet donc de collecter des données de formulaire, générer du contenu dynamique, ou encore gérer des cookies.

### Syntaxe PHP

Les fichiers php ont l'extension `.php` et le code s'écrit entres balises `<?php>` et `?>`. Seule la balise ouvrante est nécessaire si le fichier contient exclusivement du PHP.

#### Variables

En PHP, les variables sont péfixées par `$`.
On assigne une valeur à une variable avec `=` , on peut l'afficher avec `echo` et l'inspecter grâce à `var_dump()` (affiche le type de donnée et son contenu).

#### Types de données

##### Scalaires

Les données *scalaires* contiennent un seul caractère.

- **string** : chaîne de caractères, écrite entre guillemets simmples `'` ou double `"` (on peut utiliser l'antislash `\` pour **échapper** un caractère, ou utiliser le caractère complémentaire dans ce cas)
- **int** : nombre entier
- **float** : nombre à virgules
- **boolean** : booléen, dont les deux valeurs possibles sont `true` ou `false`

##### Constantes

Une constante est un identifiant qui représente une **valeur simple**. Comme son nom le suggère, cette valeur **ne peut jamais être modifiée** durant l’exécution du script. Le nom d’une constante est sensible à la casse. Par convention, les constantes sont toujours **en majuscules**.

```
<?php
// Définition dune constante
define("AGE_MINI", 7);
define("AGE_MAXI", 77);
define("SITE_TITLE", "Mon super titre de site");

// Usage
echo '<title>'.SITE_TITLE.'</title>';
```

##### Composées

###### Tableaux simples (= *array*)

Pour stocker plusieurs infos dans une même variable.
`$salade_de_fruits = ["pomme", "poire", "banane", "kiwi"];`
On accède au rang **x** en faisant `$salade_de_fruits[x];`.

/!\ La numérotation des rangs (= index) commence **à 0**.

On peut rajouter des éléments au tableau après la déclaration de celui-ci :
`$salade_de_fruits[] = "rhum";`

###### Tableaux associatifs

On donne nous-mêmes les index au tableau, que l'on nomme **clés** (= *key*)

```
<?php>
$salade_de_fruits = [
    "gourmand" => "banane",
    "croquant => "pomme",
];
```

Accès à une valeur : `$salade_de_fruits["gourmand"];`

Ajout d'une valeur : `$salade_de_fruits["fondant"] = "mangue";`

Ecrasement d'un valeur : `$salade_de_fruits["croquant"] = "ananas";`

###### Opérations

On peut faire les opérations arithmétiques de base : `+`, `-`, `*`, `/`. Un `echo 2 + 2;` affichera 4.

###### Concaténation

On peu additionner plusieurs données de type différents grâce à la concaténation la concaténation, que l’on réalise
avec `.`.

On peut également utiliser des doubles-quotes `"` plutôt que les simples-quotes `'` pour afficher le contenu d’une variables.

```
<?php
$helper = `Loïc`;
echo $helper . 'va nous manquer après la formation';
echo "$helper va nous manquer après la formation";
``` 

### Combinaison HTML-PHP

Au lieu d'utiliser des tonnes de commandes afin d'afficher du HTML, les pages PHP contiennent des fragments HTML. Le code PHP est inclus entre une balise de début `<?php` et une balise de fin `?>` qui permettent au serveur web de passer en mode PHP.

Ce qui distingue PHP des langages de script comme le Javascript, est que le code est exécuté sur le serveur, générant ainsi le HTML, qui sera ensuite envoyé au client. Le client ne reçoit que le résultat du script, sans aucun moyen d'avoir accès au code qui a produit ce résultat.

### Conditions

On peut exécuter des actions en fonctions d'une condition grâce à la syntaxe `if($condition){ action; }`. L'action ne sera réalisée que si la condition est vérifiée 
(= renvoie `true`).

On peut définir plusieurs cas possibles avec `elseif` ainsi qu'une action à exécuter dans la cas où la condition est fause avec `else`.

La condition à vérifier peut être un boléen, une comparaison de valeur seule, une comparaison de valeur ET de type ou encore un test multiple grâce à des opérateurs logiques : `||` ( = OR , '*ou*') et `&&` ( = AND, '*et*').

La fonction `empty` permet de vérifier si une valeur est vide ou indéfinie, celle `isset` permet de vérifier si une variable est définie.

Il existe un **opérateur ternaire** s'écrivant `condition ? valeur si vrai : valeur si faux`.

Enfin, on peut utiliser l'**opérateur de fusion nulle** `$a ?? $b` pour éviter les inconvénients d’une variable qui pourrait être nulle.

### Boucles PHP



#### Boucles FOR



#### Boucles WHILE



#### Boucles FOREACH

### Fonctions

## Formulaires

### Formulaires HTML

### Formulaires PHP

#### Méthodes GET et POST

### Fonctions PHP

### Documentation

- [php.net](https://www.php.net/docs.php)